<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTA Bus Time | Developers > SIRI > Change Log
    </title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico" />

    <link rel="stylesheet" href="/css/bustime.css">
    <script src="/js/bustime.js"></script>
</head>
<body>
  <div class="main-body no-map">
    <header class="header" id="header">
      <div class="header-inner">
        <a href="/" aria-label="MTA Bus Time Home" id="logo-link">
          <img id="logo" src="/img/bustime-logo.png" alt="MTA Bus Time" class="logo"/>
        </a>
        <nav>
            <ul class="menu">
                <li><a href="/">Home</a></li>
                <li><a href="/help/text/">Text</a></li>
                <li><a href="/about/">About</a></li>
                <li><a href="/contact/">Contact</a></li>
                <li><a href="/developers/" class="active">Developers</a></li>
                <li><a href="/help/">Help</a></li>
            </ul>
        </nav>
      </div>
    </header>
    <div class="main-content">
      <ul class="breadcrumb">
        <li><a href="/developers/">Developers</a></li>
        <li><a href="/developers/SIRI/">SIRI</a></li>
      </ul>
      <h1 class="page-title">Change Log</h1>
      <div class="content-and-toc">
        <button id="toc-toggle" class="button icon-only" aria-hidden="true" aria-expanded="true" aria-label="Toggle Table of Contents (currently visible)" aria-pressed="true">
          <span class="svg-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path d="M19.056 19.252C18.554 19.711 17.913 19.94 17.131 19.94 16.164 19.94 15.404 19.63 14.85 19.01 14.297 18.387 14.02 17.532 14.02 16.447 14.02 15.273 14.335 14.368 14.964 13.733 15.512 13.179 16.208 12.902 17.054 12.902 18.185 12.902 19.012 13.273 19.535 14.015 19.824 14.432 19.979 14.85 20 15.27H18.595C18.504 14.947 18.387 14.704 18.244 14.54 17.989 14.248 17.61 14.102 17.108 14.102 16.597 14.102 16.194 14.309 15.9 14.722 15.605 15.133 15.457 15.715 15.457 16.469 15.457 17.223 15.612 17.789 15.922 18.166 16.235 18.54 16.632 18.727 17.113 18.727 17.605 18.727 17.981 18.566 18.239 18.244 18.382 18.07 18.501 17.81 18.595 17.464H19.986C19.865 18.197 19.555 18.792 19.056 19.252ZM9.548 19.94C8.588 19.94 7.853 19.679 7.345 19.156 6.664 18.514 6.324 17.59 6.324 16.383 6.324 15.151 6.664 14.227 7.345 13.609 7.853 13.086 8.588 12.825 9.548 12.825 10.509 12.825 11.244 13.086 11.752 13.609 12.43 14.227 12.769 15.151 12.769 16.383 12.769 17.59 12.43 18.514 11.752 19.156 11.244 19.679 10.509 19.94 9.548 19.94ZM10.876 18.134C11.201 17.724 11.364 17.14 11.364 16.383 11.364 15.629 11.2 15.046 10.871 14.636 10.546 14.222 10.105 14.015 9.548 14.015 8.992 14.015 8.548 14.221 8.217 14.631 7.885 15.042 7.719 15.626 7.719 16.383 7.719 17.14 7.885 17.724 8.217 18.134 8.548 18.545 8.992 18.75 9.548 18.75 10.105 18.75 10.547 18.545 10.876 18.134ZM5.446 13.03V14.221H3.435V19.753H2.021V14.221H0V13.03H5.446Z"/><rect width="20" height="2" rx="1"/><rect width="20" height="2" y="4" rx="1"/><rect width="20" height="2" y="8" rx="1"/></svg>
          </span>
        </button>
        <nav id="toc" role="menu">
          <h2 class="toc-header">Table of Contents</h2>
          <ul class="menu toc-menu">
            <li><a href="/developers/">MTA Bus Time Developer&nbsp;Access</a></span></li>
            <li><a href="/developers/gtfs-realtime">GTFS-Realtime</a></li>
            <li>
              <a href="/developers/siri/">The SIRI API</a>
              <ul class="menu toc-sub-menu">
                <li><a href="/developers/siri/change-log/" class="active">Change Log</a></li>
                <li><a href="/developers/siri/vehicle-monitoring/">Vehicle Monitoring</a></li>
                <li><a href="/developers/siri/stop-monitoring/">Stop Monitoring</a></li>
                <li><a href="/developers/siri/monitored-vehicle-journey/">Monitored Vehicle Journey</a></li>
                <li><a href="/developers/siri/situation-exchange-delivery/">Situation Exchange Delivery</a></li>
              </ul>
            </li>
           <li><a href="/developers/restful-api/">OneBusAway "Discovery"&nbsp;API</a></li>
           <li><a href="/developers/cancelled-trip-api-features/">Cancelled Trip API&nbsp;Features</a></li>
           <li><a href="/developers/archive-data/">Archived Bus Time&nbsp;Data</a></li>
           <li><a href="/developers/open-source/">Improving the MTA Bus Time&nbsp;System</a>
          </ul>
        </nav>
        <div class="content">
          <div class="page-content card">
            <h2>Changes for Fall 2016 Release</h2>
            <p>SIRI Version 2 for StopMonitoring and VehicleMonitoring. now supports <code>minimum</code> detail level, cutting data usage by approximately 50% over the <code>normal</code> level.</p>
            <h2>Changes for Fall 2015 Release</h2>
            <p>SIRI Version 2 support for StopMonitoring and VehicleMonitoring. Using SIRI version 2 and new <code>basic</code> detail level cuts data usage by approximately 20%.</p>
            <h2>Changes for Fall 2012 Release</h2>
            <p>A number of changes are coming in the Fall of 2012</p>
            <h3>Deployment of OneBusAway RESTful API for "Discovery" of static information</h3>
            <p>MTA Bus Time is powered (in part) by the open source <a href="https://github.com/OneBusAway/onebusaway/wiki" target="_blank">OneBusAway</a> (OBA) software. While MTA Bus Time's SIRI API is a new addition to the OBA project, OBA does have its own RESTful developer API. We will be providing access to that that API, with some minor modifications, for the MTA Bus Time project.</p>
            <p>The documentation for the OBA RESTful API is available <a href="https://developer.onebusaway.org/modules/onebusaway-application-modules/current/api/where/index.html" target="_blank">online</a>. The modifications to this API with respect to MTA Bus Time are described <a href="https://github.com/OneBusAway/onebusaway-application-modules/wiki/RESTful-API-Roadmap" target="_blank">here</a>. This API will allow you to "discover" static/baseline information about the bus services covered under MTA Bus Time. It is, effectively, a set of web services that gives you convenient HTTP-based access to selected subsets of information otherwise available from the GTFS files.</p>
            <h3>Multi-agency/operator expansion</h3>
            <p>MTA has two bus operating agencies: MTA New York City Transit and MTA Bus Company (with GTFS <code>agency_id</code>'s "MTA NYCT" and "MTABC", respectively). These two agencies share the same bus stops and set of bus stop ID's. While their co-existence will be invisible to users of MTA Bus Time's web, mobile, and SMS interfaces, some slight changes are required to the developer API's to handle this situation:</p>
            <ul>
              <li>All stops will have an <code>agency_id</code>/<code>OperatorRef</code> of "MTA" (eg "MTA_308209") rather than "MTA NYCT" or "MTABC".</li>
              <li>The <code>OperatorRef</code> parameter of the <a href="/developers/siri/vehicle-monitoring/">VehicleMonitoring</a> and <a href="/developers/siri/stop-monitoring/">StopMonitoring</a> calls will become optional. You should still use it when you can (it will make the responses come back more quickly) but it's not strictly necessary.</li>
              <li>All routes will still have the <code>agency_id</code>/<code>OperatorRef</code> of the GTFS file from which the routes originally came.</li>
            </ul>
            <h2>Changes for July 2012 Release</h2>
            <p>(Full documentation will be updated to include these changes closer to release date)</p>
            <h3>New Parameters on StopMonitoring</h3>
            <p>2 new parameters that allow you to modulate the amount of information you get back from the <code>StopMonitoring</code> call:</p>
            <ul>
              <li><code>MaximumStopVisits</code> - an upper bound on the number of buses to return in the results.</li>
              <li><code>MinimumStopVisitsPerLine</code> - a lower bound on the number of buses to return in the results per line/route (assuming that many are available)</li>
            </ul>
            <h3>OnwardCalls Starting Point in StopMonitoring Results</h3>
            <p>In <code>StopMonitoring</code>, <code>OnwardCalls</code> currently start after the stop that is being monitored. With this new release, they start with the immediate next stop the bus will make.</p>
            <h3>Transparency of Block vs. Trip-Level Assignment</h3>
            <p>MTA Bus Time tries to assign buses to blocks- a sequence of trips that start and end at a depot. This allows the system to make a statement about what a bus will do after it reaches the end of its current trip.&nbsp;</p>
            <p>However, there is not always enough affirmative and corresponding evidence to make such a strong statement. In this case, MTA Bus Time falls back to a trip-level assignment, where it just picks a trip from the schedule that is representative of the route and stopping pattern that the bus is likely to pursue.</p>
            <p>The SIRI API now reflects this distinction as described here and in other items below. If the assignment is block-level, the new <code>BlockRef</code> field of the <code>MonitoredVehicleJourney</code> is present, and populated with the assigned block id.</p>
            <h3>Scheduled Departure Time from Terminal</h3>
            <p>When a bus has a block-level assignment and is in the layover at a terminal, a new <code>OriginAimedDepartureTime</code> field on <code>MonitoredVehicleJourney</code> indicates the scheduled departure time of that bus from that terminal in ISO8601 format. This is reflected in the Bus Time UIs as <strong>"At Terminal, Scheduled to depart at HH:MM."</strong></p>
            <h3>StopMonitoring Updates to Use Block-Level Assignment</h3>
            <p><code>StopMonitoring</code> results will now include buses that are scheduled to stop at the monitored stop according to the schedule for their assigned blocks, even if they are not yet on the trip that will serve the monitored stop. This occurs only when those buses have a block-level assignment; otherwise, they are not included until they reach the terminal and present evidence that they will continue on to serve the monitored stop. In general, this means that <code>StopMonitoring</code> requests will have more results. The diagram below shows an example of this behavior.</p>
            <!--<p><img src="https://xwiki.dev.obanyc.com/bin/download/Developers/WebHome/wraparound/png" alt="wraparound/png"></p>!-->
            <p>This is indicated by:</p>
            <ul>
              <li>The <code>ProgressStatus</code> field will include a <code>prevTrip</code> flag, indicating that the bus is still on a trip prior to the one that will serve the monitored stop. The <code>prevTrip</code> flag may also be combined with <code>layover</code> when the bus is laying over and scheduled to depart.</li>
              <li>the <code>OnwardCalls</code> will start at the beginning of the trip on which the bus will serve the monitored stop. That means that the first <code>OnwardCall</code> will be often be more than 1 stop away.</li>
              <li>The <code>FramedJourneyRef</code> (which has the GTFS trip_id) being different for a given bus than in in the <code>VehicleMonitoring</code> result for that bus.</li>
            </ul>
            <h2>Changes from MTA Bus Time B63 Pilot to Production Launch</h2>
            <p>Summary of changes to the Bus Time API</p>
            <h3>JSON:</h3>
            <p>API calls will return JSON rather than XML if the suffix of the URL is .json rather than .xml.</p>
            <h3>SituationExchangeDelivery:</h3>
            <p>The SIRI SituationExchangeDelivery element in the response only appears when there is a service change active for a route or stop being called on. It is used by the responses to both the VehicleMonitoring and StopMonitoring calls.</p>
            <h3>New Parameters:</h3>
            <p>MaximumNumberOfCallsOnwards in VehicleMonitoring and StopMonitoring:<br>Limits the number of OnwardCall elements returned in the query when VehicleMonitoringDetailLevel or StopMonitoringDetailLevel =calls</p>
            <h3>Changes to elements in MonitoredVehicleJourney and StopMonitoring include:</h3>
            <ol>
              <li>Inclusion of PresentableDistance element, a UI friendly distance field</li>
              <li>Bearing is now more accurate</li>
              <li>CourseOfJourneyRef has been removed</li>
              <li>GTFS route_short_name now in PublishedLineName</li>
              <li>GTFS trip_headsign now in DestinationName</li>
              <li>Layover status information now in ProgressStatus<br></li>
              <li>OperatorRef is now the same as the GTFS Agency ID.</li>
              <li>OperatorRef/ GTFS Agency ID is prepended to the LineRef element.</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
