<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTA Bus Time | Developers > SIRI > Vehicle Monitoring
    </title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico" />

    <link rel="stylesheet" href="/css/bustime.css">
    <script src="/js/bustime.js"></script>
</head>
<body>
  <div class="main-body no-map">
    <header class="header" id="header">
      <div class="header-inner">
        <strong class="beta">BETA</strong>
        <a href="/" aria-label="MTA Bus Time Home" class="logo-link">
          <img id="logo" src="/img/bustime-logo.svg" alt="MTA Bus Time" class="logo"/>
        </a>
        <nav>
            <ul class="menu">
                <li><a href="/">Home</a></li>
                <li><a href="/help/text/">Text</a></li>
                <li><a href="/about/">About</a></li>
                <li><a href="/contact/">Contact</a></li>
                <li><a href="/developers/" class="active">Developers</a></li>
                <li><a href="/help/">Help</a></li>
            </ul>
        </nav>
        <a href="https://www.mta.info/" target="_blank" aria-label="MTA Home" class="mta-logo-link">
          <img src="/img/mta-logo.svg" alt="MTA" class="mta-logo" />
        </a>
      </div>
    </header>
    <div class="main-content">
      <ul class="breadcrumb">
        <li><a href="/developers/">Developers</a></li>
        <li><a href="/developers/SIRI/">SIRI</a></li>
      </ul>
      <h1 class="page-title">Vehicle Monitoring</h1>
      <div class="content-and-toc">
        <button id="toc-toggle" class="button icon-only" aria-hidden="true" aria-expanded="true" aria-label="Toggle Table of Contents (currently visible)" aria-pressed="true">
          <span class="svg-icon-wrap">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path d="M19.056 19.252C18.554 19.711 17.913 19.94 17.131 19.94 16.164 19.94 15.404 19.63 14.85 19.01 14.297 18.387 14.02 17.532 14.02 16.447 14.02 15.273 14.335 14.368 14.964 13.733 15.512 13.179 16.208 12.902 17.054 12.902 18.185 12.902 19.012 13.273 19.535 14.015 19.824 14.432 19.979 14.85 20 15.27H18.595C18.504 14.947 18.387 14.704 18.244 14.54 17.989 14.248 17.61 14.102 17.108 14.102 16.597 14.102 16.194 14.309 15.9 14.722 15.605 15.133 15.457 15.715 15.457 16.469 15.457 17.223 15.612 17.789 15.922 18.166 16.235 18.54 16.632 18.727 17.113 18.727 17.605 18.727 17.981 18.566 18.239 18.244 18.382 18.07 18.501 17.81 18.595 17.464H19.986C19.865 18.197 19.555 18.792 19.056 19.252ZM9.548 19.94C8.588 19.94 7.853 19.679 7.345 19.156 6.664 18.514 6.324 17.59 6.324 16.383 6.324 15.151 6.664 14.227 7.345 13.609 7.853 13.086 8.588 12.825 9.548 12.825 10.509 12.825 11.244 13.086 11.752 13.609 12.43 14.227 12.769 15.151 12.769 16.383 12.769 17.59 12.43 18.514 11.752 19.156 11.244 19.679 10.509 19.94 9.548 19.94ZM10.876 18.134C11.201 17.724 11.364 17.14 11.364 16.383 11.364 15.629 11.2 15.046 10.871 14.636 10.546 14.222 10.105 14.015 9.548 14.015 8.992 14.015 8.548 14.221 8.217 14.631 7.885 15.042 7.719 15.626 7.719 16.383 7.719 17.14 7.885 17.724 8.217 18.134 8.548 18.545 8.992 18.75 9.548 18.75 10.105 18.75 10.547 18.545 10.876 18.134ZM5.446 13.03V14.221H3.435V19.753H2.021V14.221H0V13.03H5.446Z"/><rect width="20" height="2" rx="1"/><rect width="20" height="2" y="4" rx="1"/><rect width="20" height="2" y="8" rx="1"/></svg>
          </span>
        </button>
        <nav id="toc" role="menu">
          <h2 class="toc-header">Table of Contents</h2>
          <ul class="menu toc-menu">
            <li><a href="/developers/" tabindex="0">MTA Bus Time Developer&nbsp;Access</a></span></li>
            <li><a href="/developers/gtfs-realtime/" tabindex="0">GTFS-Realtime</a></li>
            <li>
              <a href="/developers/siri/" tabindex="0">The SIRI API</a>
              <ul class="menu toc-sub-menu">
                <li><a href="/developers/siri/change-log/" tabindex="0">Change Log</a></li>
                <li><a href="/developers/siri/vehicle-monitoring/" tabindex="0" class="active">Vehicle Monitoring</a></li>
                <li><a href="/developers/siri/stop-monitoring/" tabindex="0">Stop Monitoring</a></li>
                <li><a href="/developers/siri/monitored-vehicle-journey/" tabindex="0">Monitored Vehicle Journey</a></li>
                <li><a href="/developers/siri/situation-exchange-delivery/" tabindex="0">Situation Exchange Delivery</a></li>
              </ul>
            </li>
            <li><a href="/developers/restful-api/" tabindex="0">OneBusAway "Discovery"&nbsp;API</a></li>
            <li><a href="/developers/cancelled-trip-api-features/" tabindex="0">Cancelled Trip API&nbsp;Features</a></li>
            <li><a href="/developers/archive-data/" tabindex="0">Archived Bus Time&nbsp;Data</a></li>
            <li><a href="/developers/open-source/" tabindex="0">Improving the MTA Bus Time&nbsp;System</a>
          </ul>
        </nav>
        <div class="content">
          <div class="page-content card">
            <h2>SIRI VehicleMonitoring Call</h2>
              <p>The SIRI VehicleMonitoring ("SIRI VM") call allows the developer to request information about one, some, or all vehicles monitored by the MTA Bus Time system. As much as possible, the values used both in the VM request and the VM response correspond to the values in the GTFS data.</p>
              <h2>SIRI VehicleMonitoring Requests</h2>
              <p>It is accessible at the following URLs:</p>
              <p><a href="https://bustime.mta.info/api/siri/vehicle-monitoring.json" target="_blank">https://bustime.mta.info/api/siri/vehicle-monitoring.json</a></p>
              <p>Please note that the calls made without either a VehicleRef or LineRef produces quite a load on the system, so use them sparingly. Any developers found to be making repeated calls (e.g. at less than &nbsp;30 second intervals) for all vehicles in the system may find their key revoked.</p>
              <p>with the following GET parameters:</p>
              <ul>
                <li><strong>key</strong> - your MTA Bus Time developer API key (required). Go <a href="https://register.developer.obanyc.com" target="_blank">here</a> to get one.</li>
                <li><strong>version</strong> - which version of the SIRI API to use (1 or 2). Defaults to 1, but 2 is preferrable.</li>
                <li><strong>OperatorRef</strong> - the GTFS agency ID to be monitored (optional). Currently <code>MTA</code>.</li>
                <li><strong>VehicleRef</strong> - the ID of the vehicle to be monitored (optional). This is the 4-digit number painted on the side of the bus, for example <code>7560</code>. Response will include all buses if not included.&nbsp;</li>
                <li><strong>LineRef</strong> - a filter by 'fully qualified' route name, GTFS agency ID + route ID (optional).</li>
                <li><strong>DirectionRef</strong> - a filter by GTFS direction ID (optional). Either <code>0</code> or <code>1</code>.</li>
                <li><strong>VehicleMonitoringDetailLevel</strong> - Level of detail present in response. In order of verbosity:
                  <ul>
                    <li><code>minimum</code> - only available in version 2. Designed for front-end use.</li>
                    <li><code>basic</code> - only available in version 2. Designed for system-to-system interchange when GTFS is loaded.</li>
                    <li><code>normal</code> - default.</li>
                    <li><code>calls</code> Determines whether or not the response will include the stops ("calls" in SIRI-speak) each vehicle is going to make <strong>after</strong> it serves the selected stop.</li>
                  </ul>
                </li>
                <li><strong>MaximumNumberOfCallsOnwards</strong> Limit on the number of <code>OnwardCall</code> elements for each vehicle when <code>VehicleMonitoringDetailLevel=calls</code></li>
                <li><strong>MaximumStopVisits</strong> - an upper bound on the number of buses to return in the results.</li>
                <li><strong>MinimumStopVisitsPerLine</strong> - a lower bound on the number of buses to return in the results per line/route (assuming that many are available)</li>
              </ul>
              <h2>SIRI VehicleMonitoring Responses</h2>
              <p>The XML below illustrates the SIRI VehicleMonitoring response. The comments in the XML below document the meaning of each of the XML elements that are unique to the SIRI VehicleMonitoring call. Much of the interesting data is contained inside the <code>MonitoredVehicleJourney</code> element, which has <a href="=/developers/siri/monitored-vehicle-journey">its own documentation</a>.</p>
<!-- must keep the below block un-indented !-->
<pre><code>&lt;!-- SIRI container elements --&gt;
&lt;Siri version=&quot;1.3&quot; xmlns=&quot;http://www.siri.org.uk/siri&quot;&gt;
  &lt;ServiceDelivery&gt;

    &lt;!-- The timestamp on the MTA Bus Time server at the time the request was fulfilled --&gt;
    &lt;ResponseTimestamp&gt;2011-01-28T14:22:48-05:00&lt;/ResponseTimestamp&gt;

    &lt;!-- SIRI container for VehicleMonitoring response data --&gt;
    &lt;VehicleMonitoringDelivery version=&quot;1.3&quot;&gt;

      &lt;!-- Same as above.  Required by the SIRI spec. --&gt;
      &lt;ResponseTimestamp&gt;2011-01-28T14:22:48-05:00&lt;/ResponseTimestamp&gt;
      &lt;!-- The time until which the response data is valid until. --&gt;
      &lt;ValidUntil&gt;2011-01-28T14:23:48-05:00&lt;/ValidUntil&gt;

      &lt;!-- SIRI container for data about a particular vehicle --&gt;
      &lt;VehicleActivity&gt;

        &lt;!-- The timestamp of the last real-time update from the particular vehicle --&gt;
        &lt;RecordedAtTime&gt;2011-01-28T14:22:30-05:00&lt;/RecordedAtTime&gt;

        &lt;!-- A MonitoredVehicleJourney element for a vehicle in revenue service. Please See the MonitoredVehicleJourney page for a thorough description --&gt;
        &lt;MonitoredVehicleJourney&gt;
          ...
        &lt;/MonitoredVehicleJourney&gt;
      &lt;/VehicleActivity&gt;

      &lt;!-- The next vehicle. --&gt;
      &lt;VehicleActivity&gt;
        &lt;RecordedAtTime&gt;2011-01-28T14:22:43-05:00&lt;/RecordedAtTime&gt;

        &lt;!-- A complete MonitoredVehicleJourney element. See the MonitoredVehicleJourney page for more information --&gt;
        &lt;MonitoredVehicleJourney&gt;...&lt;/MonitoredVehicleJourney&gt;
      &lt;/VehicleActivity&gt;

      ... More VehicleActivity elements

    &lt;/VehicleMonitoringDelivery&gt;
  &lt;/ServiceDelivery&gt;
&lt;/Siri&gt;</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
